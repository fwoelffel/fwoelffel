{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/opaque-types/","result":{"data":{"markdownRemark":{"html":"<p>As a software engineer, one of the most important aspects of writing code is ensuring that it accurately reflects the domain it represents. In domain-driven design (DDD), this is achieved by modeling domain concepts as closely as possible, using the language of the domain to define types, functions, and operations.</p>\n<p>One way to achieve this is through the use of opaque types, a powerful technique that can help improve the safety, clarity, flexibility, and readability of your code. In this article, we'll explore the benefits of opaque types in DDD and show you how to use them in your TypeScript code.</p>\n<h2 id=\"what-are-opaque-types\" style=\"position:relative;\"><a href=\"#what-are-opaque-types\" aria-label=\"what are opaque types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What are Opaque Types?</h2>\n<p>An opaque type is a type that provides a unique abstraction over an underlying type, without exposing its implementation details. It is used to enforce type safety and prevent invalid values from being used in a program.</p>\n<p>Here's an example:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">ProductId</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">readonly</span> __brand<span class=\"token operator\">:</span> unique <span class=\"token builtin\">symbol</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">&amp;</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getProductById</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> ProductId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Product<span class=\"token punctuation\">;</span></code></pre></div>\n<p>In this example, we've defined a new type <code class=\"language-text\">ProductId</code> that is compatible with the <code class=\"language-text\">string</code> type, but is not assignable to or from it. We've achieved this by intersecting the <code class=\"language-text\">string</code> type with a unique symbol, effectively creating a new type that is distinct from <code class=\"language-text\">string</code>.</p>\n<h2 id=\"benefits-of-opaque-types-in-ddd\" style=\"position:relative;\"><a href=\"#benefits-of-opaque-types-in-ddd\" aria-label=\"benefits of opaque types in ddd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Benefits of Opaque Types in DDD</h2>\n<p>Opaque types offer several benefits when used in domain-driven design:</p>\n<h3 id=\"improved-type-safety\" style=\"position:relative;\"><a href=\"#improved-type-safety\" aria-label=\"improved type safety permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Improved Type Safety</h3>\n<p>By defining opaque types for domain concepts, you can ensure that only valid values are used in your application. This helps improve type safety by catching errors at compile-time, rather than at runtime. In the example above, by defining a ProductId type, we ensure that only valid product IDs are passed to functions that expect them, reducing the risk of bugs caused by invalid values.</p>\n<h3 id=\"improved-clarity\" style=\"position:relative;\"><a href=\"#improved-clarity\" aria-label=\"improved clarity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Improved Clarity</h3>\n<p>Opaque types can also improve the readability of your code by making it easier to identify the purpose and intent of different types and functions. By using opaque types to represent domain concepts, you can give meaningful names to the types and functions in your code, making it easier to understand their purpose and behavior, and communicate the meaning and purpose of these concepts more clearly to other developers, making it easier for them to understand and modify your code.</p>\n<h3 id=\"improved-flexibility\" style=\"position:relative;\"><a href=\"#improved-flexibility\" aria-label=\"improved flexibility permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Improved Flexibility</h3>\n<p>Opaque types can also improve the flexibility of your code by allowing you to change the definition of a domain concept without affecting the rest of your codebase. For example, if you decide to change the definition of a product ID from a string to a number, you can do so by changing the definition of the ProductId type, without needing to update all the functions and operations that use it.</p>","id":"9968c2b7-4a70-5b6a-a837-215c57662f4c","timeToRead":2,"frontmatter":{"date":"2023-03-31","title":"Opaque types","published":true}}},"pageContext":{"id":"9968c2b7-4a70-5b6a-a837-215c57662f4c"}},"staticQueryHashes":["1275878163"],"slicesMap":{}}